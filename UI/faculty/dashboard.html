<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NeuroFace AI - Faculty Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="./faculty.js"></script>
    <link rel="stylesheet" href="./faculty.css">
</head>
<body class="dark">
    <!-- Main Container -->
    <div class="flex h-screen">
        <!-- Sidebar -->
        <div class="sidebar-glass w-60 flex-shrink-0 p-4 hidden md:block">
            <div class="sidebar-logo-container mb-8">
                <img src="../Logo.png" alt="NeuroFace AI Logo" class="logo-img">
                <div class="mt-2">
                    <p class="panel-text">FACULTY PANEL</p>
                </div>
            </div>
            
            <!-- Navigation -->
            <nav class="space-y-2">
                <a href="#" class="nav-link flex items-center space-x-3 p-3 active" onclick="setActiveTab('dashboard')">
                    <i class="fas fa-tachometer-alt w-5"></i>
                    <span>Dashboard</span>
                </a>
                <a href="#" class="nav-link flex items-center space-x-3 p-3" onclick="setActiveTab('students')">
                    <i class="fas fa-users w-5"></i>
                    <span>My Students</span>
                    <span class="badge badge-info ml-auto" id="sidebarStudentCount">0</span>
                </a>
                <a href="#" class="nav-link flex items-center space-x-3 p-3" onclick="setActiveTab('attendance')">
                    <i class="fas fa-calendar-check w-5"></i>
                    <span>Attendance</span>
                    <span class="badge badge-success ml-auto" id="sidebarAttendanceBadge">Today: 0%</span>
                </a>
                <a href="#" class="nav-link flex items-center space-x-3 p-3" onclick="setActiveTab('reports')">
                    <i class="fas fa-chart-bar w-5"></i>
                    <span>Reports</span>
                </a>
                <a href="#" class="nav-link flex items-center space-x-3 p-3" onclick="showSection('profile')">
                    <i class="fas fa-user-circle w-5"></i>
                    <span>My Profile</span>
                </a>
            </nav>
            
            <!-- Divider -->
            <div class="my-6 border-t border-gray-800"></div>
            
            <!-- Quick Stats -->
            <div class="glass-card rounded-lg p-4">
                <h4 class="font-medium text-sm mb-3">Quick Stats</h4>
                <div class="space-y-2">
                    <div class="flex justify-between text-sm">
                        <span class="text-gray-400">My Students</span>
                        <span class="font-semibold" id="sidebarMyStudents">0</span>
                    </div>
                    <div class="flex justify-between text-sm">
                        <span class="text-gray-400">Today Present</span>
                        <span class="font-semibold text-green-400" id="sidebarTodayPresent">0</span>
                    </div>
                    <div class="flex justify-between text-sm">
                        <span class="text-gray-400">Today Absent</span>
                        <span class="font-semibold text-red-400" id="sidebarTodayAbsent">0</span>
                    </div>
                    <div class="flex justify-between text-sm">
                        <span class="text-gray-400">Classes</span>
                        <span class="font-semibold text-blue-400" id="sidebarClassesCount">0</span>
                    </div>
                </div>
            </div>
            
            <!-- Sidebar Footer -->
            <div class="absolute bottom-4 left-4 right-4">
                <button onclick="logout()" class="w-full p-3 rounded-lg border border-red-500 text-red-400 hover:bg-red-900/30 transition">
                    <i class="fas fa-sign-out-alt mr-2"></i>
                    <span>Logout</span>
                </button>
                <div class="text-center text-xs text-gray-500 mt-4">
                    <p>NeuroFace AI v2.0</p>
                    <p class="mt-1">© 2026 All Rights Reserved</p>
                </div>
            </div>
        </div>

        <!-- Mobile Header -->
        <div class="md:hidden navbar p-4">
            <div class="flex justify-between items-center">
                <div class="flex items-center space-x-3">
                    <button onclick="toggleSidebar()" class="p-2 rounded-lg hover:bg-gray-800">
                        <i class="fas fa-bars text-white"></i>
                    </button>
                    <div class="flex items-center space-x-2">
                        <div class="w-8 h-8 rounded-lg bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center">
                            <i class="fas fa-brain text-white text-sm"></i>
                        </div>
                        <h1 class="text-lg font-bold neuroface-gradient">NeuroFace AI</h1>
                    </div>
                </div>
                <div class="flex items-center space-x-2">
                    <button id="mobileThemeToggle" class="theme-toggle">
                        <i class="fas fa-moon text-white"></i>
                    </button>
                    <button onclick="logout()" class="p-2 rounded-lg border border-red-500 text-red-400 hover:bg-red-900/30">
                        <i class="fas fa-sign-out-alt"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- Mobile Sidebar -->
        <div id="mobileSidebar" class="fixed inset-0 z-40 md:hidden hidden">
            <div class="absolute inset-0 bg-black bg-opacity-50" onclick="toggleSidebar()"></div>
            <div class="absolute left-0 top-0 bottom-0 w-64 p-4 sidebar-glass">
                <div class="flex items-center justify-between mb-8">
                    <div class="flex items-center space-x-3">
                        <div class="w-10 h-10 rounded-lg bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center">
                            <i class="fas fa-brain text-white"></i>
                        </div>
                        <div>
                            <h1 class="text-lg font-bold neuroface-gradient">NeuroFace AI</h1>
                            <p class="text-xs text-gray-400">Faculty Panel</p>
                        </div>
                    </div>
                    <button onclick="toggleSidebar()" class="p-2 rounded-lg hover:bg-gray-800">
                        <i class="fas fa-times text-white"></i>
                    </button>
                </div>
                
                <!-- Navigation links -->
                <nav class="space-y-2 mb-6">
                    <a href="#" class="nav-link flex items-center space-x-3 p-3 active" onclick="setActiveTab('dashboard'); toggleSidebar();">
                        <i class="fas fa-tachometer-alt w-5"></i>
                        <span>Dashboard</span>
                    </a>
                    <a href="#" class="nav-link flex items-center space-x-3 p-3" onclick="setActiveTab('students'); toggleSidebar();">
                        <i class="fas fa-users w-5"></i>
                        <span>My Students</span>
                        <span class="badge badge-info ml-auto" id="mobileStudentCount">0</span>
                    </a>
                    <a href="#" class="nav-link flex items-center space-x-3 p-3" onclick="setActiveTab('attendance'); toggleSidebar();">
                        <i class="fas fa-calendar-check w-5"></i>
                        <span>Attendance</span>
                        <span class="badge badge-success ml-auto" id="mobileAttendanceBadge">Today: 0%</span>
                    </a>
                    <a href="#" class="nav-link flex items-center space-x-3 p-3" onclick="setActiveTab('reports'); toggleSidebar();">
                        <i class="fas fa-chart-bar w-5"></i>
                        <span>Reports</span>
                    </a>
                    <a href="#" class="nav-link flex items-center space-x-3 p-3" onclick="showSection('profile')">
                        <i class="fas fa-user-circle w-5"></i>
                        <span>My Profile</span>
                    </a>
                </nav>
                
                <div class="text-center text-xs text-gray-500">
                    <p>NeuroFace AI v2.0</p>
                    <p class="mt-1">© 2026 All Rights Reserved</p>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="flex-1 flex flex-col overflow-hidden">
            <!-- Header Navbar -->
            <div class="navbar p-4 hidden md:block">
                <div class="flex justify-between items-center">
                    <div>
                        <h2 class="text-xl font-bold neuroface-gradient" id="pageTitle">Dashboard Overview</h2>
                        <p class="text-sm text-gray-400" id="sectionSubtitle">Welcome back, Faculty</p>
                    </div>
                    
                    <div class="flex items-center space-x-4">
                        <!-- Quick Actions -->
                        <div class="flex items-center space-x-2">
                            <button onclick="refreshDashboard()" class="p-2 rounded-lg hover:bg-gray-800" title="Refresh">
                                <i class="fas fa-sync-alt text-gray-400"></i>
                            </button>
                            <button onclick="toggleFullscreen()" class="p-2 rounded-lg hover:bg-gray-800" title="Fullscreen">
                                <i class="fas fa-expand text-gray-400"></i>
                            </button>
                        </div>
                        
                        <!-- Date/Time -->
                        <div class="text-right">
                            <div class="font-semibold" id="currentTime">Loading...</div>
                            <div class="text-sm text-gray-400" id="currentDate">Loading...</div>
                        </div>
                        
                        <!-- Theme Toggle -->
                        <button id="themeToggle" class="theme-toggle">
                            <i class="fas fa-moon" id="themeIcon"></i>
                        </button>
                        
                        <!-- User Dropdown -->
                        <div class="relative">
                            <button onclick="toggleUserDropdown()" class="flex items-center space-x-3 p-2 rounded-lg hover:bg-gray-800">
                                <div class="w-8 h-8 rounded-full bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center">
                                    <i class="fas fa-user-graduate text-white text-sm"></i>
                                </div>
                                <div class="text-left hidden md:block">
                                    <p class="text-sm font-medium" id="facultyName">Loading...</p>
                                    <p class="text-xs text-gray-400">Faculty Member</p>
                                </div>
                                <i class="fas fa-chevron-down text-gray-400 text-xs"></i>
                            </button>
                            <div id="userDropdown" class="absolute right-0 mt-2 w-48 user-dropdown rounded-lg shadow-xl hidden z-50">
                                <div class="p-4 border-b border-gray-800">
                                    <p class="font-medium" id="dropdownFacultyName">Loading...</p>
                                    <p class="text-xs text-gray-400" id="dropdownFacultyEmail">Loading...</p>
                                </div>
                                <div class="p-2">
                                    <a href="#" onclick="showSection('profile'); toggleUserDropdown(); return false;" class="flex items-center space-x-3 p-2 rounded hover:bg-gray-800">
                                        <i class="fas fa-user-circle text-gray-400 w-5"></i>
                                        <span>My Profile</span>
                                    </a>
                                    <div class="border-t border-gray-800 mt-2 pt-2">
                                        <button onclick="logout()" class="w-full flex items-center space-x-3 p-2 rounded hover:bg-red-900/30 text-red-400">
                                            <i class="fas fa-sign-out-alt w-5"></i>
                                            <span>Logout</span>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Profile Management Section -->
            <div id="profileSection" class="hidden space-y-6 fade-in">
                <div class="max-w-4xl mx-auto">
                    <div class="mb-8">
                        <h3 class="text-2xl font-bold neuroface-gradient">My Profile</h3>
                        <p class="text-gray-400">Manage your account information and security</p>
                    </div>
                    
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                        <!-- Left Column - Profile Info -->
                        <div class="lg:col-span-2">
                            <div class="glass-card rounded-2xl p-6 mb-6">
                                <h4 class="text-lg font-semibold mb-6 pb-4 border-b border-gray-800">Personal Information</h4>
                                
                                <form id="profileForm">
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                                        <div>
                                            <label class="block text-sm font-medium mb-2">Full Name</label>
                                            <input type="text" id="profileName" 
                                                class="input-dark w-full rounded-lg px-4 py-3 focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
                                                placeholder="Enter your display name">
                                            <p class="text-xs text-gray-400 mt-2">This name will be displayed throughout the dashboard</p>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium mb-2">Email Address</label>
                                            <input type="email" id="profileEmail" 
                                                class="input-dark w-full rounded-lg px-4 py-3 focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
                                                placeholder="Enter your email">
                                            <p class="text-xs text-gray-400 mt-2">Your login email address</p>
                                        </div>
                                    </div>
                                    
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                                        <div>
                                            <label class="block text-sm font-medium mb-2">Role</label>
                                            <div class="input-dark w-full rounded-lg px-4 py-3">
                                                <span class="font-medium" id="profileRole">Faculty Member</span>
                                                <p class="text-xs text-gray-400 mt-1">Faculty privilege level</p>
                                            </div>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium mb-2">Account Created</label>
                                            <div class="input-dark w-full rounded-lg px-4 py-3">
                                                <span class="font-medium" id="profileCreatedAt">Loading...</span>
                                                <p class="text-xs text-gray-400 mt-1">Date when account was created</p>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="flex justify-end space-x-3">
                                        <button type="button" onclick="updateProfileName()" 
                                                class="px-6 py-3 rounded-lg border border-indigo-500 text-indigo-400 hover:bg-indigo-900/30 transition">
                                            <i class="fas fa-user-edit mr-2"></i>Save Name Only
                                        </button>
                                        <button type="button" onclick="updateEmail()" 
                                                class="px-6 py-3 rounded-lg btn-primary">
                                            <i class="fas fa-save mr-2"></i>Update Email
                                        </button>
                                    </div>
                                </form>
                            </div>
                            
                            <!-- Password Change Section -->
                            <div class="glass-card rounded-2xl p-6">
                                <h4 class="text-lg font-semibold mb-6 pb-4 border-b border-gray-800">Change Password</h4>
                                
                                <form id="passwordForm">
                                    <div class="space-y-4 mb-6">
                                        <div>
                                            <label class="block text-sm font-medium mb-2">Current Password</label>
                                            <div class="relative">
                                                <input type="password" id="currentPassword" 
                                                    class="input-dark w-full rounded-lg px-4 py-3 focus:ring-2 focus:ring-indigo-500 focus:border-transparent pr-10"
                                                    placeholder="Enter current password" required>
                                                <button type="button" onclick="togglePasswordVisibility('currentPassword')" 
                                                        class="absolute right-3 top-3 text-gray-400 hover:text-indigo-400">
                                                    <i class="fas fa-eye"></i>
                                                </button>
                                            </div>
                                        </div>
                                        
                                        <div>
                                            <label class="block text-sm font-medium mb-2">New Password</label>
                                            <div class="relative">
                                                <input type="password" id="newPassword" 
                                                    class="input-dark w-full rounded-lg px-4 py-3 focus:ring-2 focus:ring-indigo-500 focus:border-transparent pr-10"
                                                    placeholder="Enter new password" required>
                                                <button type="button" onclick="togglePasswordVisibility('newPassword')" 
                                                        class="absolute right-3 top-3 text-gray-400 hover:text-indigo-400">
                                                    <i class="fas fa-eye"></i>
                                                </button>
                                            </div>
                                            <div class="mt-2">
                                                <div class="flex items-center space-x-2 mb-1">
                                                    <div id="passwordStrength" class="h-2 flex-1 rounded-full bg-gray-700"></div>
                                                    <span id="passwordStrengthText" class="text-xs text-gray-400">Weak</span>
                                                </div>
                                                <ul class="text-xs text-gray-400 space-y-1">
                                                    <li id="lengthCheck" class="flex items-center">
                                                        <i class="fas fa-times text-red-400 mr-2 text-xs"></i>
                                                        <span>At least 8 characters</span>
                                                    </li>
                                                    <li id="uppercaseCheck" class="flex items-center">
                                                        <i class="fas fa-times text-red-400 mr-2 text-xs"></i>
                                                        <span>At least one uppercase letter</span>
                                                    </li>
                                                    <li id="numberCheck" class="flex items-center">
                                                        <i class="fas fa-times text-red-400 mr-2 text-xs"></i>
                                                        <span>At least one number</span>
                                                    </li>
                                                    <li id="specialCheck" class="flex items-center">
                                                        <i class="fas fa-times text-red-400 mr-2 text-xs"></i>
                                                        <span>At least one special character</span>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                        
                                        <div>
                                            <label class="block text-sm font-medium mb-2">Confirm New Password</label>
                                            <div class="relative">
                                                <input type="password" id="confirmPassword" 
                                                    class="input-dark w-full rounded-lg px-4 py-3 focus:ring-2 focus:ring-indigo-500 focus:border-transparent pr-10"
                                                    placeholder="Confirm new password" required>
                                                <button type="button" onclick="togglePasswordVisibility('confirmPassword')" 
                                                        class="absolute right-3 top-3 text-gray-400 hover:text-indigo-400">
                                                    <i class="fas fa-eye"></i>
                                                </button>
                                            </div>
                                            <p id="passwordMatch" class="text-xs text-green-400 mt-2 hidden">
                                                <i class="fas fa-check mr-1"></i>
                                                Passwords match
                                            </p>
                                            <p id="passwordMismatch" class="text-xs text-red-400 mt-2 hidden">
                                                <i class="fas fa-times mr-1"></i>
                                                Passwords do not match
                                            </p>
                                        </div>
                                    </div>
                                    
                                    <div class="flex justify-end">
                                        <button type="button" onclick="changePassword()" 
                                                class="px-6 py-3 rounded-lg btn-primary">
                                            <i class="fas fa-key mr-2"></i>Update Password
                                        </button>
                                    </div>
                                </form>
                            </div>
                        </div>
                        
                        <!-- Right Column - Profile Summary -->
                        <div>
                            <div class="glass-card rounded-2xl p-6 mb-6">
                                <h4 class="text-lg font-semibold mb-6">Profile Summary</h4>
                                
                                <div class="flex flex-col items-center mb-6">
                                    <div class="w-24 h-24 rounded-full bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center mb-4">
                                        <i class="fas fa-user-graduate text-white text-3xl"></i>
                                    </div>
                                    <h5 class="text-xl font-bold" id="profileDisplayName">Loading...</h5>
                                    <p class="text-gray-400" id="profileDisplayEmail">Loading...</p>
                                    <span class="mt-2 px-3 py-1 rounded-full text-xs bg-indigo-900/30 text-indigo-400" id="profileRoleBadge">
                                        Faculty
                                    </span>
                                </div>
                                
                                <div class="space-y-4">
                                    <div class="flex justify-between items-center">
                                        <span class="text-gray-400">Last Login</span>
                                        <span class="font-medium" id="profileLastLogin">Just now</span>
                                    </div>
                                    <div class="flex justify-between items-center">
                                        <span class="text-gray-400">Theme Preference</span>
                                        <span class="font-medium" id="profileTheme">Dark</span>
                                    </div>
                                    <div class="flex justify-between items-center">
                                        <span class="text-gray-400">Account Status</span>
                                        <span class="px-2 py-1 rounded text-xs bg-green-900/30 text-green-400">Active</span>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Danger Zone -->
                            <div class="glass-card rounded-2xl p-6 border border-red-900/30">
                                <h4 class="text-lg font-semibold mb-4 text-red-400">Danger Zone</h4>
                                <p class="text-sm text-gray-400 mb-4">Irreversible actions. Proceed with caution.</p>
                                
                                <div class="space-y-3">                                    
                                    <button onclick="showDeleteAccountModal()" 
                                            class="w-full text-left p-3 rounded-lg border border-red-500 text-red-400 hover:bg-red-900/10 transition">
                                        <div class="flex items-center justify-between">
                                            <div>
                                                <i class="fas fa-trash-alt mr-2"></i>
                                                Delete Account
                                            </div>
                                            <i class="fas fa-chevron-right text-xs"></i>
                                        </div>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Content Sections -->
            <div class="flex-1 overflow-auto p-4 md:p-6">
                <!-- Dashboard Section -->
                <div id="dashboardTab" class="space-y-6 fade-in">
                    <!-- Stats Cards - Updated for Faculty -->
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                        <div class="glass-card stat-card rounded-xl p-6 neon-glow">
                            <div class="flex justify-between items-start">
                                <div>
                                    <p class="text-gray-400 text-sm mb-2">My Students</p>
                                    <h3 class="text-3xl font-bold mb-1" id="totalStudentsCount">0</h3>
                                    <p class="text-green-400 text-sm" id="studentStatusText">
                                        <i class="fas fa-users mr-1"></i>Assigned Students
                                    </p>
                                </div>
                                <div class="w-14 h-14 rounded-xl bg-gradient-to-br from-indigo-900/30 to-indigo-900/10 flex items-center justify-center">
                                    <i class="fas fa-users text-indigo-400 text-2xl"></i>
                                </div>
                            </div>
                        </div>
                        
                        <div class="glass-card stat-card rounded-xl p-6 neon-glow">
                            <div class="flex justify-between items-start">
                                <div>
                                    <p class="text-gray-400 text-sm mb-2">Attendance Today</p>
                                    <h3 class="text-3xl font-bold mb-1" id="todayAttendanceRate">0%</h3>
                                    <p class="text-blue-400 text-sm" id="attendanceDetailText">
                                        <span id="todayPresentCount">0</span> Present / <span id="todayTotalCount">0</span> Total
                                    </p>
                                </div>
                                <div class="w-14 h-14 rounded-xl bg-gradient-to-br from-green-900/30 to-green-900/10 flex items-center justify-center">
                                    <i class="fas fa-calendar-check text-green-400 text-2xl"></i>
                                </div>
                            </div>
                        </div>
                        
                        <div class="glass-card stat-card rounded-xl p-6 neon-glow">
                            <div class="flex justify-between items-start">
                                <div>
                                    <p class="text-gray-400 text-sm mb-2">My Classes</p>
                                    <h3 class="text-3xl font-bold mb-1" id="myClassesCount">0</h3>
                                    <p class="text-yellow-400 text-sm">
                                        <i class="fas fa-chalkboard mr-1"></i>Teaching Classes
                                    </p>
                                </div>
                                <div class="w-14 h-14 rounded-xl bg-gradient-to-br from-yellow-900/30 to-yellow-900/10 flex items-center justify-center">
                                    <i class="fas fa-chalkboard text-yellow-400 text-2xl"></i>
                                </div>
                            </div>
                        </div>
                        
                        <div class="glass-card stat-card rounded-xl p-6 neon-glow">
                            <div class="flex justify-between items-start">
                                <div>
                                    <p class="text-gray-400 text-sm mb-2">Weekly Average</p>
                                    <h3 class="text-3xl font-bold mb-1" id="weeklyAverageAttendance">0%</h3>
                                    <p class="text-purple-400 text-sm">
                                        <i class="fas fa-chart-line mr-1"></i>7-Day Trend
                                    </p>
                                </div>
                                <div class="w-14 h-14 rounded-xl bg-gradient-to-br from-purple-900/30 to-purple-900/10 flex items-center justify-center">
                                    <i class="fas fa-chart-line text-purple-400 text-2xl"></i>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Charts and Tables -->
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                        <!-- Attendance Chart -->
                        <div class="glass-card rounded-2xl p-6 lg:col-span-2">
                            <div class="flex justify-between items-center mb-6">
                                <h3 class="text-lg font-semibold">Weekly Attendance Trend</h3>
                                <div class="flex space-x-2">
                                    <button onclick="loadWeeklyTrend()" class="px-3 py-1 rounded-lg glass-card hover:bg-gray-800/50 text-sm active">
                                        7 Days
                                    </button>
                                    <button onclick="loadMonthlyTrend()" class="px-3 py-1 rounded-lg glass-card hover:bg-gray-800/50 text-sm">
                                        30 Days
                                    </button>
                                </div>
                            </div>
                            <div class="chart-container">
                                <canvas id="attendanceChart"></canvas>
                            </div>
                        </div>
                        
                        <!-- Quick Actions -->
                        <div class="glass-card rounded-2xl p-6">
                            <h3 class="text-lg font-semibold mb-6">Quick Actions</h3>
                            <!-- In the dashboard section, update the quick actions button -->
                            <div class="space-y-4">
                                <button onclick="setActiveTab('attendance')" class="btn-primary w-full p-4 rounded-lg flex items-center justify-center space-x-3">
                                    <i class="fas fa-calendar-check text-xl"></i>
                                    <span>View Attendance</span> <!-- Changed from "Mark Attendance" -->
                                </button>
                                <button onclick="setActiveTab('reports')" class="glass-card w-full p-4 rounded-lg flex items-center justify-center space-x-3 hover:bg-gray-800/50 transition">
                                    <i class="fas fa-chart-bar text-blue-400 text-xl"></i>
                                    <span>Generate Reports</span>
                                </button>
                                <button onclick="setActiveTab('students')" class="glass-card w-full p-4 rounded-lg flex items-center justify-center space-x-3 hover:bg-gray-800/50 transition">
                                    <i class="fas fa-user-graduate text-green-400 text-xl"></i>
                                    <span>View Students</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Reports Section -->
                <div id="reportsTab" class="hidden space-y-6 fade-in">
                    <!-- Header -->
                    <div class="flex justify-end">
                        <button onclick="generateReport()" class="btn-primary px-6 py-3 rounded-lg flex items-center space-x-2">
                            <i class="fas fa-download"></i>
                            <span>Generate Report</span>
                        </button>
                    </div>
                    
                    <!-- Report Filters -->
                    <div class="glass-card rounded-2xl p-6">
                        <h3 class="text-lg font-semibold mb-6">Filter Criteria</h3>
                        
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                            <div>
                                <label class="block text-sm font-medium mb-2">Class</label>
                                <select id="reportClassFilter" class="input-dark w-full rounded-lg px-4 py-3">
                                    <option value="">All Classes</option>
                                    <!-- Classes will be populated dynamically -->
                                </select>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium mb-2">Stream</label>
                                <select id="reportStreamFilter" class="input-dark w-full rounded-lg px-4 py-3">
                                    <option value="">All Streams</option>
                                    <option value="Science">Science</option>
                                    <option value="Commerce">Commerce</option>
                                    <option value="Arts">Arts</option>
                                </select>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium mb-2">Date</label>
                                <div class="flex space-x-2">
                                    <input type="date" id="reportDateFilter" class="input-dark w-full rounded-lg px-4 py-3">
                                    <button onclick="setToday()" class="px-4 py-3 rounded-lg glass-card hover:bg-gray-800/50">
                                        Today
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="mt-6 grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label class="block text-sm font-medium mb-2">Date Range (Optional)</label>
                                <div class="flex space-x-2">
                                    <input type="date" id="reportStartDate" class="input-dark w-full rounded-lg px-4 py-3" placeholder="Start Date">
                                    <input type="date" id="reportEndDate" class="input-dark w-full rounded-lg px-4 py-3" placeholder="End Date">
                                </div>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium mb-2">Report Format</label>
                                <select id="reportFormat" class="input-dark w-full rounded-lg px-4 py-3">
                                    <option value="pdf">PDF Document</option>
                                    <option value="excel">Excel Spreadsheet</option>
                                    <option value="html">HTML Report</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="mt-6">
                            <label class="block text-sm font-medium mb-2">Include Statistics</label>
                            <div class="flex flex-wrap gap-4">
                                <label class="inline-flex items-center">
                                    <input type="checkbox" id="includeSummary" checked class="rounded border-gray-700 bg-gray-800 text-indigo-600 focus:ring-indigo-500">
                                    <span class="ml-2 text-sm">Summary Statistics</span>
                                </label>
                                <label class="inline-flex items-center">
                                    <input type="checkbox" id="includeCharts" checked class="rounded border-gray-700 bg-gray-800 text-indigo-600 focus:ring-indigo-500">
                                    <span class="ml-2 text-sm">Charts & Graphs</span>
                                </label>
                                <label class="inline-flex items-center">
                                    <input type="checkbox" id="includeDetails" checked class="rounded border-gray-700 bg-gray-800 text-indigo-600 focus:ring-indigo-500">
                                    <span class="ml-2 text-sm">Student Details</span>
                                </label>
                                <label class="inline-flex items-center">
                                    <input type="checkbox" id="includeTrends" class="rounded border-gray-700 bg-gray-800 text-indigo-600 focus:ring-indigo-500">
                                    <span class="ml-2 text-sm">Trend Analysis</span>
                                </label>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Report Preview -->
                    <div class="glass-card rounded-2xl p-6">
                        <div class="flex justify-between items-center mb-6">
                            <h3 class="text-lg font-semibold">Report Preview</h3>
                            <button onclick="refreshPreview()" class="px-4 py-2 rounded-lg glass-card hover:bg-gray-800/50">
                                <i class="fas fa-sync-alt mr-2"></i>
                                Refresh Preview
                            </button>
                        </div>
                        
                        <div class="overflow-x-auto">
                            <table class="w-full" id="reportPreviewTable">
                                <!-- Update the students table header -->
                                <thead>
                                    <tr class="border-b border-gray-800">
                                        <th class="text-left p-4">Roll No</th>
                                        <th class="text-left p-4">Student Name</th>
                                        <th class="text-left p-4">Class</th>
                                        <th class="text-left p-4">Stream</th>
                                        <th class="text-left p-4">Email</th>
                                        <th class="text-left p-4">Phone</th>
                                        <th class="text-left p-4">Attendance %</th>
                                        <th class="text-left p-4">Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="reportPreviewBody">
                                    <tr id="reportLoadingRow">
                                        <td colspan="7" class="p-8 text-center text-gray-400">
                                            <div class="flex flex-col items-center">
                                                <i class="fas fa-chart-bar text-4xl mb-4"></i>
                                                <p class="text-lg">No Report Generated Yet</p>
                                                <p class="text-sm mt-1">Configure filters and click "Generate Report" to see preview</p>
                                            </div>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        
                        <!-- Report Statistics -->
                        <div id="reportStats" class="mt-6 hidden">
                            <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                                <div class="glass-card rounded-xl p-4">
                                    <p class="text-gray-400">Total Students</p>
                                    <p class="text-2xl font-bold mt-1" id="reportTotalStudents">0</p>
                                </div>
                                <div class="glass-card rounded-xl p-4">
                                    <p class="text-gray-400">Average Attendance</p>
                                    <p class="text-2xl font-bold text-green-400 mt-1" id="reportAvgAttendance">0%</p>
                                </div>
                                <div class="glass-card rounded-xl p-4">
                                    <p class="text-gray-400">Present</p>
                                    <p class="text-2xl font-bold text-blue-400 mt-1" id="reportPresentCount">0</p>
                                </div>
                                <div class="glass-card rounded-xl p-4">
                                    <p class="text-gray-400">Absent</p>
                                    <p class="text-2xl font-bold text-red-400 mt-1" id="reportAbsentCount">0</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Students Management Tab -->
                <div id="studentsTab" class="hidden space-y-6 fade-in">
                    <!-- Header -->
                    <div class="flex justify-end">
                        <!-- Add this button -->
                        <button onclick="showAddStudentModal()" class="btn-primary px-6 py-3 rounded-lg flex items-center space-x-2">
                            <i class="fas fa-user-plus"></i>
                            <span>Add Student</span>
                        </button>
                    </div>
                    
                    <!-- Student Stats -->
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                        <div class="glass-card rounded-xl p-4">
                            <p class="text-gray-400">Total Students</p>
                            <p class="text-2xl font-bold mt-1" id="studentTotalCount">0</p>
                        </div>
                        <div class="glass-card rounded-xl p-4">
                            <p class="text-gray-400">Active</p>
                            <p class="text-2xl font-bold text-green-400 mt-1" id="studentActiveCount">0</p>
                        </div>
                        <div class="glass-card rounded-xl p-4">
                            <p class="text-gray-400">Classes</p>
                            <p class="text-2xl font-bold text-blue-400 mt-1" id="studentClassCount">0</p>
                        </div>
                        <div class="glass-card rounded-xl p-4">
                            <p class="text-gray-400">Streams</p>
                            <p class="text-2xl font-bold text-purple-400 mt-1" id="studentStreamCount">0</p>
                        </div>
                    </div>

                    <!-- Add Student Modal -->
                    <div id="addStudentModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
                        <div class="modal-content max-w-md w-full mx-4 max-h-[90vh] overflow-y-auto">
                            <div class="p-6">
                                <div class="flex justify-between items-center mb-6">
                                    <h3 class="text-lg font-semibold neuroface-gradient">Register New Student</h3>
                                    <button onclick="closeAddStudentModal()" class="text-gray-400 hover:text-white">
                                        <i class="fas fa-times"></i>
                                    </button>
                                </div>
                                
                                <form id="addStudentForm" enctype="multipart/form-data" onsubmit="registerStudent(event)">
                                    <div class="space-y-4">
                                        <!-- Profile Picture Upload -->
                                        <div class="mb-6">
                                            <label class="block text-sm font-medium mb-2">Student Photo *</label>
                                            <div class="flex flex-col items-center justify-center">
                                                <!-- Image Preview -->
                                                <div id="studentImagePreview" class="mb-4 hidden">
                                                    <div class="w-32 h-32 rounded-full overflow-hidden border-2 border-indigo-500">
                                                        <img id="previewImage" src="" alt="Preview" class="w-full h-full object-cover">
                                                    </div>
                                                </div>
                                                
                                                <!-- Upload Area -->
                                                <div id="uploadArea" 
                                                    class="w-full border-2 border-dashed border-gray-700 rounded-xl p-8 text-center cursor-pointer hover:border-indigo-500 transition-colors duration-300"
                                                    onclick="document.getElementById('studentImage').click()">
                                                    <i class="fas fa-cloud-upload-alt text-4xl text-gray-500 mb-3"></i>
                                                    <p class="text-gray-400 mb-1">Click to upload student photo or Drag and Drop</p>
                                                    <p class="text-xs text-gray-500">JPG, PNG, GIF up to 5MB</p>
                                                </div>
                                                
                                                <!-- File Input (Hidden) -->
                                                <input type="file" id="studentImage" name="image" accept=".jpg,.jpeg,.png,.gif" required
                                                    class="hidden" onchange="previewImage(event)">
                                                
                                                <!-- Selected File Info -->
                                                <div id="fileInfo" class="mt-3 text-sm text-gray-400 hidden">
                                                    <span id="fileName"></span>
                                                    <button type="button" onclick="removeImage()" class="ml-2 text-red-400 hover:text-red-300">
                                                        <i class="fas fa-times"></i>
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div>
                                            <label class="block text-sm font-medium mb-2">Full Name *</label>
                                            <input type="text" id="studentFullName" name="full_name" required
                                                class="input-dark w-full rounded-lg px-4 py-2 focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
                                                placeholder="Enter student's full name">
                                        </div>
                                        
                                        <div class="grid grid-cols-2 gap-4">
                                            <div>
                                                <label class="block text-sm font-medium mb-2">Roll Number *</label>
                                                <input type="text" id="studentRollNo" name="roll_no" required
                                                    class="input-dark w-full rounded-lg px-4 py-2 focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
                                                    placeholder="e.g., 2023001">
                                            </div>
                                            
                                            <div>
                                                <label class="block text-sm font-medium mb-2">Class *</label>
                                                <select id="studentClass" name="standard" required
                                                    class="input-dark w-full rounded-lg px-4 py-2 focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
                                                    onchange="updateStreamOptions()">
                                                    <option value="">Select Class</option>
                                                    <!-- Classes will be populated dynamically -->
                                                </select>
                                            </div>
                                        </div>
                                        
                                        <!-- Stream Section - Will be shown/hidden based on class selection -->
                                        <div id="streamSection">
                                            <label class="block text-sm font-medium mb-2">Stream</label>
                                            <select id="studentStream" name="stream"
                                                class="input-dark w-full rounded-lg px-4 py-2 focus:ring-2 focus:ring-indigo-500 focus:border-transparent">
                                                <option value="">Select Stream</option>
                                                <option value="Science">Science</option>
                                                <option value="Commerce">Commerce</option>
                                                <option value="Arts">Arts</option>
                                            </select>
                                        </div>
                                        
                                        <div class="grid grid-cols-2 gap-4">
                                            <div>
                                                <label class="block text-sm font-medium mb-2">Email *</label>
                                                <input type="email" id="studentEmail" name="email" required
                                                    class="input-dark w-full rounded-lg px-4 py-2 focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
                                                    placeholder="student@example.com">
                                            </div>
                                            
                                            <div>
                                                <label class="block text-sm font-medium mb-2">Phone *</label>
                                                <input type="tel" id="studentPhone" name="phone" required
                                                    class="input-dark w-full rounded-lg px-4 py-2 focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
                                                    placeholder="9876543210">
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="mt-6 flex justify-end space-x-3">
                                        <button type="button" onclick="closeAddStudentModal()" 
                                                class="px-4 py-2 rounded-lg border border-gray-700 hover:bg-gray-800/50 transition">
                                            Cancel
                                        </button>
                                        <button type="submit" 
                                                class="px-4 py-2 rounded-lg btn-primary flex items-center space-x-2">
                                            <i class="fas fa-user-plus"></i>
                                            <span>Register Student</span>
                                        </button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>

                    <!-- Edit Student Modal -->
                    <div id="editStudentModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
                        <div class="modal-content max-w-md w-full mx-4 max-h-[90vh] overflow-y-auto">
                            <div class="p-6">
                                <div class="flex justify-between items-center mb-6">
                                    <h3 class="text-lg font-semibold neuroface-gradient">Edit Student</h3>
                                    <button onclick="closeEditStudentModal()" class="text-gray-400 hover:text-white">
                                        <i class="fas fa-times"></i>
                                    </button>
                                </div>
                                
                                <form id="editStudentForm" onsubmit="updateStudent(event)">
                                    <input type="hidden" id="editStudentId">
                                    
                                    <div class="space-y-4">
                                        <div>
                                            <label class="block text-sm font-medium mb-2">Full Name *</label>
                                            <input type="text" id="editStudentFullName" name="full_name" required
                                                class="input-dark w-full rounded-lg px-4 py-2 focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
                                                placeholder="Enter student's full name">
                                        </div>
                                        
                                        <div class="grid grid-cols-2 gap-4">
                                            <div>
                                                <label class="block text-sm font-medium mb-2">Roll Number *</label>
                                                <input type="text" id="editStudentRollNo" name="roll_no" required
                                                    class="input-dark w-full rounded-lg px-4 py-2 focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
                                                    placeholder="e.g., 2023001">
                                            </div>
                                            
                                            <div>
                                                <label class="block text-sm font-medium mb-2">Class *</label>
                                                <input type="text" id="editStudentClass" name="standard" readonly
                                                    class="input-dark w-full rounded-lg px-4 py-2 bg-gray-900/50 cursor-not-allowed">
                                            </div>
                                        </div>
                                        
                                        <div>
                                            <label class="block text-sm font-medium mb-2">Stream</label>
                                            <input type="text" id="editStudentStream" name="stream" readonly
                                                class="input-dark w-full rounded-lg px-4 py-2 bg-gray-900/50 cursor-not-allowed">
                                        </div>
                                        
                                        <div class="grid grid-cols-2 gap-4">
                                            <div>
                                                <label class="block text-sm font-medium mb-2">Email *</label>
                                                <input type="email" id="editStudentEmail" name="email" required
                                                    class="input-dark w-full rounded-lg px-4 py-2 focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
                                                    placeholder="student@example.com">
                                            </div>
                                            
                                            <div>
                                                <label class="block text-sm font-medium mb-2">Phone *</label>
                                                <input type="tel" id="editStudentPhone" name="phone" required
                                                    class="input-dark w-full rounded-lg px-4 py-2 focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
                                                    placeholder="9876543210">
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="mt-6 flex justify-end space-x-3">
                                        <button type="button" onclick="closeEditStudentModal()" 
                                                class="px-4 py-2 rounded-lg border border-gray-700 hover:bg-gray-800/50 transition">
                                            Cancel
                                        </button>
                                        <button type="submit" 
                                                class="px-4 py-2 rounded-lg btn-primary flex items-center space-x-2">
                                            <i class="fas fa-save"></i>
                                            <span>Update Student</span>
                                        </button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>

                    <!-- Delete Confirmation Modal -->
                    <div id="deleteStudentModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
                        <div class="modal-content max-w-md w-full mx-4">
                            <div class="p-6">
                                <div class="flex justify-between items-center mb-6">
                                    <h3 class="text-lg font-semibold text-red-400">Delete Student</h3>
                                    <button onclick="closeDeleteStudentModal()" class="text-gray-400 hover:text-white">
                                        <i class="fas fa-times"></i>
                                    </button>
                                </div>
                                
                                <div class="mb-6">
                                    <div class="text-center mb-4">
                                        <i class="fas fa-exclamation-triangle text-red-400 text-4xl mb-3"></i>
                                        <p class="text-lg font-medium" id="deleteStudentName">Loading...</p>
                                        <p class="text-gray-400 text-sm" id="deleteStudentDetails">Loading details...</p>
                                    </div>
                                    
                                    <div class="bg-red-900/20 border border-red-800 rounded-lg p-4 mb-4">
                                        <div class="flex items-start space-x-3">
                                            <i class="fas fa-exclamation-circle text-red-400 mt-1"></i>
                                            <div>
                                                <p class="text-sm text-red-300 font-medium">Warning: This action cannot be undone</p>
                                                <p class="text-xs text-gray-400 mt-1">
                                                    This will permanently delete the student from the system including all attendance records and assignments.
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="flex items-center space-x-2 mb-4">
                                        <input type="checkbox" id="confirmDelete" class="rounded border-gray-700 bg-gray-800 text-red-600 focus:ring-red-500">
                                        <label for="confirmDelete" class="text-sm text-gray-300">
                                            I understand this action is irreversible
                                        </label>
                                    </div>
                                </div>
                                
                                <div class="flex justify-end space-x-3">
                                    <button onclick="closeDeleteStudentModal()" 
                                            class="px-4 py-2 rounded-lg border border-gray-700 hover:bg-gray-800/50 transition">
                                        Cancel
                                    </button>
                                    <button onclick="deleteStudent()" 
                                            class="px-4 py-2 rounded-lg bg-red-600 hover:bg-red-700 text-white flex items-center space-x-2"
                                            id="deleteStudentButton" disabled>
                                        <i class="fas fa-trash"></i>
                                        <span>Delete Student</span>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Student Table -->
                    <div class="glass-card rounded-2xl overflow-hidden">
                        <div class="p-6 border-b border-gray-800">
                            <div class="flex justify-between items-center">
                                <h3 class="font-semibold text-lg">Student List</h3>
                                <div class="flex space-x-2">
                                    <input type="text" placeholder="Search students..." class="input-dark rounded-lg px-4 py-2 w-64" id="searchStudents" onkeyup="filterStudentTable()">
                                    <select class="input-dark rounded-lg px-4 py-2" id="filterStudentClass" onchange="filterStudentTable()">
                                        <option value="">All Classes</option>
                                        <!-- Classes will be populated dynamically -->
                                    </select>
                                    <select class="input-dark rounded-lg px-4 py-2" id="filterStudentStatus" onchange="filterStudentTable()">
                                        <option value="">All Status</option>
                                        <option value="ACTIVE">Active</option>
                                        <option value="INACTIVE">Inactive</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="overflow-x-auto">
                            <table class="w-full" id="studentsTable">
                                <thead>
                                    <tr class="border-b border-gray-800">
                                        <th class="text-left p-4">Roll No</th>
                                        <th class="text-left p-4">Student Name</th>
                                        <th class="text-left p-4">Class</th>
                                        <th class="text-left p-4">Stream</th>
                                        <th class="text-left p-4">Email</th>
                                        <th class="text-left p-4">Phone</th>
                                        <th class="text-left p-4">Attendance %</th>
                                    </tr>
                                </thead>
                                <tbody id="studentsTableBody">
                                    <!-- Students data will be populated here -->
                                    <tr id="studentsLoadingRow">
                                        <td colspan="8" class="p-4 text-center text-gray-400">
                                            <div class="flex items-center justify-center space-x-2">
                                                <div class="loading-spinner"></div>
                                                <span>Loading student data...</span>
                                            </div>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <div class="p-4 border-t border-gray-800 flex justify-between items-center">
                            <div class="text-sm text-gray-400" id="studentsTableInfo">Loading...</div>
                            <div class="flex space-x-2" id="studentsPagination">
                                <!-- Pagination will be added here -->
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Attendance Management Tab -->
                <div id="attendanceTab" class="hidden space-y-6 fade-in">
                    <div class="mb-6">
                        <!-- Date Selector -->
                        <div class="glass-card rounded-2xl p-6 mt-6">
                            <div class="flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0">
                                <div>
                                    <h3 class="text-lg font-semibold mb-2">Select Date</h3>
                                    <input type="date" id="attendanceDate" class="input-dark rounded-lg px-4 py-2" 
                                        value="" onchange="loadAttendanceForDate()">
                                </div>
                                <div class="flex space-x-2">
                                    <button onclick="loadTodaysAttendance()" class="px-4 py-2 rounded-lg glass-card hover:bg-gray-800/50">
                                        Today
                                    </button>
                                    <button onclick="loadYesterdaysAttendance()" class="px-4 py-2 rounded-lg glass-card hover:bg-gray-800/50">
                                        Yesterday
                                    </button>
                                </div>
                            </div>
                            
                            <!-- Add Filter Section Here -->
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-6">
                                <div>
                                    <label class="block text-sm font-medium mb-2">Filter by Class</label>
                                    <select id="attendanceClassFilter" class="input-dark w-full rounded-lg px-4 py-2" onchange="filterAttendanceTable()">
                                        <option value="">All Classes</option>
                                        <!-- Classes will be populated dynamically -->
                                    </select>
                                </div>
                                
                                <div>
                                    <label class="block text-sm font-medium mb-2">Filter by Stream</label>
                                    <select id="attendanceStreamFilter" class="input-dark w-full rounded-lg px-4 py-2" onchange="filterAttendanceTable()">
                                        <option value="">All Streams</option>
                                        <option value="Science">Science</option>
                                        <option value="Commerce">Commerce</option>
                                        <option value="Arts">Arts</option>
                                        <option value="Technology">Technology</option>
                                    </select>
                                </div>
                            </div>
                            
                            <!-- Attendance Stats for Selected Date -->
                            <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mt-6" id="attendanceStatsContainer">
                                <!-- Stats will be loaded here -->
                            </div>
                            
                            <!-- Attendance Table -->
                            <div class="mt-6">
                                <div class="flex justify-between items-center mb-4">
                                    <h3 class="text-lg font-semibold">Attendance Records</h3>
                                    <div class="text-sm text-gray-400" id="attendanceDateDisplay">Select a date</div>
                                </div>
                                
                                <!-- Add Search Bar -->
                                <div class="mb-4">
                                    <input type="text" id="attendanceSearch" 
                                        class="input-dark w-full rounded-lg px-4 py-2" 
                                        placeholder="Search by student name or roll number..."
                                        onkeyup="filterAttendanceTable()">
                                </div>
                                
                                <div class="overflow-x-auto">
                                    <table class="w-full" id="attendanceTable">
                                        <thead>
                                            <tr class="border-b border-gray-800">
                                                <th class="text-left p-4">Roll No</th>
                                                <th class="text-left p-4">Student Name</th>
                                                <th class="text-left p-4">Class</th>
                                                <th class="text-left p-4">Stream</th>
                                                <th class="text-left p-4">Status</th>
                                                <th class="text-left p-4">Recorded At</th>
                                            </tr>
                                        </thead>
                                        <tbody id="attendanceTableBody">
                                            <tr id="attendanceLoadingRow">
                                                <td colspan="6" class="p-4 text-center text-gray-400">
                                                    <div class="flex items-center justify-center space-x-2">
                                                        <div class="loading-spinner"></div>
                                                        <span>Select a date to view attendance</span>
                                                    </div>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
    
    <!-- Toast Notification -->
    <div id="toast" class="fixed bottom-4 right-4 p-4 rounded-lg shadow-lg max-w-sm hidden glass-card z-50">
        <div class="flex items-center">
            <i class="fas mr-3" id="toastIcon"></i>
            <span id="toastMessage"></span>
        </div>
    </div>
    
    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="glass-card rounded-2xl p-8 flex flex-col items-center">
            <div class="loading-spinner mb-4"></div>
            <p class="text-white" id="loadingText">Loading...</p>
        </div>
    </div>


</body>
</html>